<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TONOPTIK - audiovisual experimental music new media art">
    <meta property="og:title" content="TONOPTIK">
    <meta property="og:description" content="New media, audiovisual, light and sound art">
    <meta property="og:url" content="https://tonoptik.github.io">
    <title>TONOPTIK</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="logo">
                <img src="images/logo.png" alt="TONOPTIK" width="595" height="110">
            </a>
        </header>

        <nav>
            <ul>
                <li><a href="pages/installations.html">installations</a></li>
                <li><a href="pages/video.html">video</a></li>
                <li><a href="pages/tracks.html">tracks</a></li>
                <li><a href="pages/about.html">about</a></li>
            </ul>
        </nav>

        <main>
            <div class="featured">
                <!-- WebGL canvas - lazy loaded -->
                <canvas id="hero-canvas"
                        class="hero-canvas"
                        aria-hidden="true"></canvas>
            </div>
        </main>
    </div>

    <!-- WebGL Hero Animation - Lazy Loading -->
    <script>
      // Respect user's motion preferences
      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      if (!prefersReducedMotion) {
        // Wait for page to fully load
        window.addEventListener('load', function() {
          // Small delay to ensure smooth first paint
          setTimeout(function() {
            // Load Three.js from CDN
            const threeScript = document.createElement('script');
            threeScript.src = 'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js';
            threeScript.async = true;

            threeScript.onload = function() {
              // Load noise functions
              const noiseScript = document.createElement('script');
              noiseScript.src = 'js/noise-functions.js';

              noiseScript.onload = function() {
                // Load shader code
                const shaderScript = document.createElement('script');
                shaderScript.src = 'js/spring-deform-shader.js';

                shaderScript.onload = function() {
                  // Load main animation
                  const heroScript = document.createElement('script');
                  heroScript.src = 'js/hero-wireframe.js';
                  document.body.appendChild(heroScript);
                };

                document.body.appendChild(shaderScript);
              };

              document.body.appendChild(noiseScript);
            };

            document.body.appendChild(threeScript);
          }, 200); // 200ms delay after load
        });
      }
    </script>
</body>
</html>
